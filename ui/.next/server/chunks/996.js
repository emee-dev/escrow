"use strict";exports.id=996,exports.ids=[996],exports.modules={3128:(t,e,n)=>{n.d(e,{E:()=>i,a:()=>s,i:()=>o}),(0,n(6955).e)();var i={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},s=t=>(...e)=>({_$litDirective$:t,values:e}),o=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this.t=t,this._$AM=e,this.i=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}},8947:(t,e,n)=>{n.d(e,{j:()=>p});var i=n(3128),s=n(7128),o=n(6955);(0,o.e)(),(0,o.e)();var{I:l}=s.J,r=()=>document.createComment(""),a=(t,e,n)=>{var i;let s=t._$AA.parentNode,o=void 0===e?t._$AB:e._$AA;if(void 0===n)n=new l(s.insertBefore(r(),o),s.insertBefore(r(),o),t,t.options);else{let e=n._$AB.nextSibling,l=n._$AM,r=l!==t;if(r){let e;null==(i=n._$AQ)||i.call(n,t),n._$AM=t,void 0!==n._$AP&&(e=t._$AU)!==l._$AU&&n._$AP(e)}if(e!==o||r){let t=n._$AA;for(;t!==e;){let e=t.nextSibling;s.insertBefore(t,o),t=e}}}return n},u=(t,e,n=t)=>(t._$AI(e,n),t),d={},c=(t,e=d)=>t._$AH=e,h=t=>t._$AH,A=t=>{var e;null==(e=t._$AP)||e.call(t,!1,!0);let n=t._$AA,i=t._$AB.nextSibling;for(;n!==i;){let t=n.nextSibling;n.remove(),n=t}},v=(t,e,n)=>{let i=new Map;for(let s=e;s<=n;s++)i.set(t[s],s);return i},p=(0,i.a)(class extends i.i{constructor(t){if(super(t),t.type!==i.E.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,n){let i;void 0===n?n=e:void 0!==e&&(i=e);let s=[],o=[],l=0;for(let e of t)s[l]=i?i(e,l):l,o[l]=n(e,l),l++;return{values:o,keys:s}}render(t,e,n){return this.dt(t,e,n).values}update(t,[e,n,i]){var o;let l=h(t),{values:r,keys:d}=this.dt(e,n,i);if(!Array.isArray(l))return this.ut=d,r;let p=null!=(o=this.ut)?o:this.ut=[],$=[],m,f,y=0,_=l.length-1,E=0,b=r.length-1;for(;y<=_&&E<=b;)if(null===l[y])y++;else if(null===l[_])_--;else if(p[y]===d[E])$[E]=u(l[y],r[E]),y++,E++;else if(p[_]===d[b])$[b]=u(l[_],r[b]),_--,b--;else if(p[y]===d[b])$[b]=u(l[y],r[b]),a(t,$[b+1],l[y]),y++,b--;else if(p[_]===d[E])$[E]=u(l[_],r[E]),a(t,l[y],l[_]),_--,E++;else if(void 0===m&&(m=v(d,E,b),f=v(p,y,_)),m.has(p[y])){if(m.has(p[_])){let e=f.get(d[E]),n=void 0!==e?l[e]:null;if(null===n){let e=a(t,l[y]);u(e,r[E]),$[E]=e}else $[E]=u(n,r[E]),a(t,l[y],n),l[e]=null;E++}else A(l[_]),_--}else A(l[y]),y++;for(;E<=b;){let e=a(t,$[b+1]);u(e,r[E]),$[E++]=e}for(;y<=_;){let t=l[y++];null!==t&&A(t)}return this.ut=d,c(t,$),s.E}});(0,o.e)()},8996:(t,e,n)=>{n.r(e),n.d(e,{CommentsContent:()=>d});var i=n(8947),s=n(8782),o=n(6955);n(3128);var l=n(8882),r=n(7128);(0,o.e)();var a=(0,l.D)(r.a),u=[a.styles,s.a],d=class extends a{constructor(){super(),this.unselectAnnotation=()=>{this.selectedAnnotation=null},this.unselectAnnotationEsc=t=>{t&&(null==t?void 0:t.key)!=="Escape"||(this.selectedAnnotation=null)},this.selectAnnotation=({detail:t})=>{let{uuid:e}=t;if(this.selectedAnnotation===e){this.selectedAnnotation=null;return}this.selectedAnnotation=e},this.checkLastAnnotation=t=>{var e,n;let i=this.annotations.filter(t=>t.resolved),s=this.annotations.filter(t=>!t.resolved);return"All comments"===this.annotationFilter?t===(null==(e=i[i.length-1])?void 0:e.uuid):t===(null==(n=s[s.length-1])?void 0:n.uuid)},this.annotations=[],this.participantsList=[]}updated(t){super.updated(t),this.updateComplete.then(()=>{let t=this.shadowRoot.querySelector(`[uuid='${this.selectedAnnotation}']`);if(!t)return;let e=this.lastCommentId===this.selectedAnnotation,n=e?0:-150,i=t.getClientRects()[0];i&&(this.scrollBy(0,i.y+n),e&&setTimeout(()=>{this.scrollBy(0,i.y+n)},200))})}connectedCallback(){super.connectedCallback(),window.document.body.addEventListener("select-annotation",this.selectAnnotation),window.document.body.addEventListener("keyup",this.unselectAnnotationEsc),window.document.body.addEventListener("unselect-annotation",this.unselectAnnotation)}disconnectedCallback(){super.disconnectedCallback(),window.document.body.removeEventListener("select-annotation",this.selectAnnotation),window.document.body.removeEventListener("keyup",this.unselectAnnotationEsc),window.document.body.removeEventListener("unselect-annotation",this.unselectAnnotation)}render(){return(0,r.V)` ${(0,i.j)(this.annotations.filter(t=>{var e;return null==(e=t.comments)?void 0:e.length}),t=>t.uuid,t=>(0,r.V)`
        <superviz-comments-annotation-item
          annotation=${JSON.stringify(t)}
          selected="${this.selectedAnnotation}"
          annotationFilter=${this.annotationFilter}
          uuid=${t.uuid}
          ?resolved=${t.resolved}
          isLastComment=${this.checkLastAnnotation(t.uuid)}
          participantsList=${JSON.stringify(this.participantsList)}
        >
        </superviz-comments-annotation-item>
      `)}`}};d.styles=u,d.properties={annotations:{type:Object},selectedAnnotation:{type:String},annotationFilter:{type:String},participantsList:{type:Object}},d=(0,o.D)([(0,r.t)("superviz-comments-content")],d)}};