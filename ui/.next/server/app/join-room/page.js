(()=>{var e={};e.id=79,e.ids=[79],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},6005:e=>{"use strict";e.exports=require("node:crypto")},1396:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(2700),r(7166),r(2591);var t=r(7639),a=r(8917),i=r(395),o=r.n(i),n=r(2053),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(s,l);let d=["",{children:["join-room",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2700)),"C:\\Users\\DELL\\Desktop\\Superviz Hackathon\\escrow_service\\ui\\app\\join-room\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,1401))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,7166)),"C:\\Users\\DELL\\Desktop\\Superviz Hackathon\\escrow_service\\ui\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,2591,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,1401))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\DELL\\Desktop\\Superviz Hackathon\\escrow_service\\ui\\app\\join-room\\page.tsx"],m="/join-room/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/join-room/page",pathname:"/join-room",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5428:(e,s,r)=>{Promise.resolve().then(r.bind(r,4068))},4068:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>w});var t=r(7214),a=r(4519),i=r(4748),o=r(3911),n=r(1952),l=r(8551),d=r(8665),c=r(1110),m=r(3012),u=r(9731),p=r(8697),x=r(2686),h=r(1964),f=r(9544),g=r(5164),j=r(2345),b=r(6375),v=r(6800);function w({searchParams:e}){(0,g.useRouter)();let s=e.roomId,r=e.groupId;(0,d.B)();let[a,i]=(0,j.useState)(!1),o=(0,p.aM)(c.h.escrow.getRoomStatus,r&&s?{groupId:r,roomId:s}:"skip");return(0,t.jsxs)("main",{className:"w-screen h-screen",children:[t.jsx(I,{}),(0,t.jsxs)("div",{className:" h-full flex flex-col pt-10 items-center bg-gradient-to-r from-blue-100 to-purple-100",children:[o&&o.data?.payment_status==="pending"&&t.jsx(y,{roomId:s,groupId:r,initialTimeInSeconds:25,startEscrow:a}),o&&o.data&&"default"===o.data.payment_status&&t.jsx(N,{amount:o.data.amount,asset:o.data.asset,terms:o.data.terms,roomId:s,groupId:r})]})]})}function y({startEscrow:e,groupId:s,roomId:r,initialTimeInSeconds:o=15}){let[n,l]=(0,j.useState)(o),[d,m]=(0,j.useState)(!1),u=(0,p.Db)(c.h.escrow.refusePayment);return(0,t.jsxs)(i.Zb,{className:"w-full max-w-md",children:[t.jsx(i.Ol,{children:t.jsx(i.ll,{className:"text-2xl font-bold text-center",children:"Escrow Service"})}),(0,t.jsxs)(i.aY,{className:"text-center",children:[t.jsx(x.Z,{className:"w-16 h-16 mx-auto mb-4 text-blue-500 animate-pulse"}),t.jsx("p",{className:"text-xl mb-4",children:"Please pay within the stipulated time"}),t.jsx("div",{className:"text-4xl font-bold mb-4","aria-live":"polite",children:`${Math.floor(n/60).toString().padStart(2,"0")}:${(n%60).toString().padStart(2,"0")}`}),d&&(0,t.jsxs)("p",{className:"text-red-500 flex items-center justify-center",children:[t.jsx(h.Z,{className:"w-5 h-5 mr-2"}),"Payment time has expired"]})]}),t.jsx(i.eW,{className:"flex justify-center",children:t.jsx(a.z,{onClick:async()=>{u({groupId:s,roomId:r})},className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200",children:"Refuse to pay"})})]})}let _=v.z.object({username:v.z.string().min(2,{message:"Username is short."}),amount_to_recieve:v.z.string(),asset_to_recieve:v.z.string(),terms:v.z.string()});function N(e){let s=(0,d.B)(),r=(0,p.Db)(c.h.escrow.joinEscrowRoom),m=(0,b.cI)({resolver:(0,u.F)(_),defaultValues:{username:"",amount_to_recieve:"0",asset_to_recieve:"USDT",terms:""}});async function x(t){if(!e.roomId||!e.groupId||!s.visitorId){console.log("RoomId, GroupId and VisitorId is undefined.");return}await r({roomId:e.roomId,groupId:e.groupId,payment_status:"pending",reciever:{username:t.username,visitorId:s.visitorId}})}return(0,t.jsxs)(i.Zb,{className:"w-full max-w-xl",children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{children:"Accept Escrow"}),t.jsx(i.SZ,{children:"Someone is hoping to create an escrow with you."})]}),t.jsx(i.aY,{children:(0,t.jsxs)("form",{className:"grid gap-4",onSubmit:m.handleSubmit(x),children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(n._,{htmlFor:"user_name",children:"Username"}),t.jsx(o.I,{id:"user_name",type:"text",placeholder:"Your username",...m.register("username")}),m.formState.errors.username&&t.jsx("span",{className:"p-4 text-red-400 text-sm tracking-tighter",children:m.formState.errors.username.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(n._,{htmlFor:"amount",children:"Amount to send"}),t.jsx(o.I,{id:"amount",type:"number",placeholder:"0.00",...m.register("amount_to_recieve"),disabled:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(n._,{htmlFor:"token-types",children:"Asset to recieve"}),t.jsx(o.I,{id:"asset",type:"text",placeholder:"Tether (USDT)",disabled:!0,...m.register("asset_to_recieve")})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(n._,{htmlFor:"terms",children:"Additional Terms"}),t.jsx(l.g,{id:"terms",rows:2,...m.register("terms"),disabled:!0,placeholder:"Enter any additional terms or conditions..."})]}),t.jsx(a.z,{className:"ml-auto",children:"Accept Escrow and Terms"})]})})]})}function I(){let{toast:e}=(0,m.pm)(),s=(0,j.useCallback)(()=>{console.log("Close button clicked")},[]);return t.jsx("div",{className:"sticky top-0 px-3 z-50 w-full border-b bg-background/95  backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"flex h-14 items-center",children:[t.jsx("div",{className:"hidden md:flex flex-1",children:t.jsx("a",{className:" flex items-center space-x-2",href:"/",children:t.jsx("span",{className:"hidden font-bold sm:inline-block",children:"Escrow"})})}),t.jsx("div",{className:"flex items-center space-x-2 md:justify-end",children:t.jsx("nav",{className:"flex items-center space-x-2",children:(0,t.jsxs)(a.z,{variant:"outline",size:"sm",className:"",onClick:s,children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx(f.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"",children:"Close"})]})})})]})})}},3911:(e,s,r)=>{"use strict";r.d(s,{I:()=>o});var t=r(7214),a=r(2345),i=r(9543);let o=a.forwardRef(({className:e,type:s,...r},a)=>t.jsx("input",{type:s,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));o.displayName="Input"},1952:(e,s,r)=>{"use strict";r.d(s,{_:()=>d});var t=r(7214),a=r(2345),i=r(5231),o=r(6232),n=r(9543);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...s},r)=>t.jsx(i.f,{ref:r,className:(0,n.cn)(l(),e),...s}));d.displayName=i.f.displayName},8551:(e,s,r)=>{"use strict";r.d(s,{g:()=>o});var t=r(7214),a=r(2345),i=r(9543);let o=a.forwardRef(({className:e,...s},r)=>t.jsx("textarea",{className:(0,i.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));o.displayName="Textarea"},2700:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(1510).createProxy)(String.raw`C:\Users\DELL\Desktop\Superviz Hackathon\escrow_service\ui\app\join-room\page.tsx#default`)},4608:(e,s,r)=>{"use strict";r.d(s,{WV:()=>n,jH:()=>l});var t=r(2345),a=r(5872),i=r(2176),o=r(7214),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,s)=>{let r=t.forwardRef((e,r)=>{let{asChild:t,...a}=e,n=t?i.g7:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(n,{...a,ref:r})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{});function l(e,s){e&&a.flushSync(()=>e.dispatchEvent(s))}}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[496,508,96,324,877,768],()=>r(1396));module.exports=t})();