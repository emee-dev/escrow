(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7261],{9727:function(e,t,r){Promise.resolve().then(r.bind(r,9201))},4962:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(7621);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...f}=e;return(0,n.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:l?24*Number(i)/Number(s):i,className:a("lucide",c),...f},[...u.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,n.createElement)(i,{ref:o,iconNode:t,className:a("lucide-".concat(s(e)),l),...c})});return r.displayName="".concat(e),r}},8574:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(4962).Z)("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]])},727:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(4962).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},6038:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(4962).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8005:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});let n=r(9397).qL},9201:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var n=r(9571),s=r(4377),a=r(2218),o=r(6276),i=r(8005),l=r(7621),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,[t,r]=(0,l.useState)(!1),n=async e=>{try{await navigator.clipboard.writeText(e),r(!0)}catch(e){console.error("Failed to copy text: ",e),r(!1)}};return(0,l.useEffect)(()=>{if(t){let t=setTimeout(()=>r(!1),e);return()=>clearTimeout(t)}},[t,e]),{copied:t,copyToClipboard:n}},d=r(8730),u=r(2521),f=r(8574),m=r(727);let p=(0,r(4962).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var h=r(6038),x=r(3727);function g(e){var t,r;let{searchParams:s}=e,a=s.roomId,o=s.groupId,[c,d]=(0,l.useState)(!1),f=(0,u.aM)(i.h.escrow.getRoomStatus,o&&a?{groupId:o,roomId:a}:"skip");return(0,l.useEffect)(()=>{var e;f&&(null===(e=f.data)||void 0===e?void 0:e.payment_status)==="pending"?d(!0):d(!1)},[f]),(0,n.jsxs)("main",{className:"w-screen h-screen",children:[(0,n.jsx)(y,{}),(0,n.jsxs)("div",{className:" h-full flex flex-col pt-10 items-center bg-gradient-to-r from-blue-100 to-purple-100",children:[f&&(null===(t=f.data)||void 0===t?void 0:t.payment_status)==="pending"&&(0,n.jsx)(v,{roomId:a,groupId:o,startEscrow:c,initialTimeInSeconds:25}),!f||(null===(r=f.data)||void 0===r?void 0:r.payment_status)==="default"&&(0,n.jsx)("div",{children:"There is nothing to show for now."})]})]})}function v(e){let t=(0,x.useRouter)(),r=(0,o.B)(),[c,d]=(0,l.useState)(25),[p,h]=(0,l.useState)(!1),g=(0,u.Db)(i.h.dispute.createDisputeRoom),v=async()=>{try{if(!e.roomId||!e.groupId||!r.visitorId){console.log("roomId and groupId are undefined.");return}await g({roomId:e.roomId,creator:r.visitorId}),t.push("/dispute?roomId=".concat(e.roomId,"&groupId=").concat(e.groupId,"&userType=","creator"))}catch(e){console.error(e)}};return(0,l.useEffect)(()=>{if(c>0&&e.startEscrow){let e=setTimeout(()=>d(c-1),1e3);return()=>clearTimeout(e)}h(!0)},[c,e]),(0,n.jsxs)(a.Zb,{className:"w-full max-w-md",children:[(0,n.jsx)(a.Ol,{children:(0,n.jsx)(a.ll,{className:"text-2xl font-bold text-center",children:"Escrow Service"})}),(0,n.jsxs)(a.aY,{className:"text-center",children:[(0,n.jsx)(f.Z,{className:"w-16 h-16 mx-auto mb-4 text-blue-500 animate-pulse"}),(0,n.jsx)("p",{className:"text-xl mb-4",children:"Hold on, waiting for user to pay"}),(0,n.jsx)("div",{className:"text-4xl font-bold mb-4","aria-live":"polite",children:"".concat(Math.floor(c/60).toString().padStart(2,"0"),":").concat((c%60).toString().padStart(2,"0"))}),p&&(0,n.jsxs)("p",{className:"text-red-500 flex items-center justify-center",children:[(0,n.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"Payment time has expired"]})]}),(0,n.jsx)(a.eW,{className:"flex justify-center",children:(0,n.jsx)(s.z,{onClick:async()=>v(),disabled:!p,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200",children:"Initiate Dispute"})})]})}function y(){let{toast:e}=(0,d.pm)(),t=(0,x.useSearchParams)(),{copied:r,copyToClipboard:a}=c(),o=(0,l.useCallback)(()=>{console.log("Close button clicked")},[]);return(0,n.jsx)("div",{className:"sticky top-0 px-3 z-50 w-full border-b bg-background/95  backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,n.jsxs)("div",{className:"flex h-14 items-center",children:[(0,n.jsx)("div",{className:"hidden md:flex flex-1",children:(0,n.jsx)("a",{className:" flex items-center space-x-2",href:"/",children:(0,n.jsx)("span",{className:"hidden font-bold sm:inline-block",children:"Escrow"})})}),(0,n.jsx)("div",{className:"flex items-center space-x-2 md:justify-end",children:(0,n.jsxs)("nav",{className:"flex items-center space-x-2",children:[(0,n.jsxs)(s.z,{size:"sm",variant:"outline",onClick:()=>{let e=t.get("roomId"),r=t.get("groupId");a("".concat(location.origin,"/join-room?roomId=").concat(e,"&groupId=").concat(r))},children:[(0,n.jsx)("span",{className:"sr-only",children:"Copy Invite URL"}),(0,n.jsx)(p,{className:"h-4 w-4"}),!r&&(0,n.jsx)("span",{children:"Copy Invite URL"}),r&&(0,n.jsx)("span",{children:"URL Copied!!"})]}),(0,n.jsxs)(s.z,{variant:"outline",size:"sm",className:"",onClick:o,children:[(0,n.jsx)("span",{className:"sr-only",children:"Close"}),(0,n.jsx)(h.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"",children:"Close"})]})]})})]})})}},4377:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(9571),s=r(7621),a=r(8759),o=r(340),i=r(4027);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...d})});c.displayName="Button"},2218:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var n=r(9571),s=r(7621),a=r(4027);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});o.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},6276:function(e,t,r){"use strict";r.d(t,{B:function(){return n}});let n=(0,r(483).U)(e=>({group:null,participant:null,roomId:void 0,visitorId:void 0,setGroup:t=>e({group:t}),setParticipant:t=>e({participant:t}),setRoomId:t=>e({roomId:t}),setVisitorId:t=>e({visitorId:t})}))},8730:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(7621);let s=0,a=new Map,o=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(c);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},4027:function(e,t,r){"use strict";r.d(t,{CG:function(){return l},Ox:function(){return c},PE:function(){return i},cn:function(){return o}});var n=r(9213),s=r(6605),a=r(5045);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}let i=e=>new Promise((t,r)=>{let n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=e=>{r(Error("Error reading file: ".concat(e)))},n.readAsDataURL(e)}),l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,r=await Promise.all(t.map(async(e,t)=>({imageUrl:{url:e.base64,detail:""},type:"image_url"})));return r.length>0&&(r[0].imageUrl.detail=void 0,r[r.length-1].imageUrl.detail=e),{content:r[0],role:"user"}},c=(0,s.kP)("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",8)}},function(e){e.O(0,[5600,4996,4250,7652,1744],function(){return e(e.s=9727)}),_N_E=e.O()}]);